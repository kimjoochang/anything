<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.anything.alimTalk.alim.AlimRepository">
    <!--
    <resultMap id="AlimResultMap" type="AlimVO">
        <id column="ALIM_SEQ" property="alimSeq"/>
        <result column="MEMBER_ID" property="memberId"/>
        <result column="TITLE" property="title"/>
        <result column="CONTENT" property="content"/>
        <result column="SEND_DAY" property="sendDay"/>
        <result column="SEND_TIME" property="sendTime"/>
        <result column="SEND_CD" property="sendCd"/>
        <result column="REG_ID" property="regId"/>
        <result column="REG_DT" property="regDt"/>
        <result column="MODI_ID" property="modiId"/>
        <result column="MODI_DT" property="modiDt"/>
    </resultMap>
    -->
    <select id="list" resultType="AlimVO" parameterType="AlimVO">
        SELECT ALIM_SEQ     as alimSeq,
               MEMBER_ID    as memberId,
               TITLE        as title,
               CONTENT      as content,
               SEND_DAY     as sendDay,
               SEND_TIME    as sendTime,
               SEND_CD      as sendCd,
               REG_ID       as regId,
               REG_DT       as regDt,
               MODI_ID      as modiId,
               MODI_DT      as modiDt
        FROM ALIM
        WHERE MEMBER_ID = #{memberId}
          AND SEND_DAY = #{sendDay}
    </select>

    <select id="listSendTime" resultType="String" parameterType="AlimVO">
        SELECT SEND_TIME
        FROM ALIM
        WHERE MEMBER_ID = #{memberId}
          AND SEND_DAY = #{sendDay}
    </select>


    <insert id="insert" parameterType="AlimVO" useGeneratedKeys="true" keyProperty="alimSeq">
        INSERT INTO ALIM
            (MEMBER_ID,     TITLE,          CONTENT,        SEND_DAY,
             SEND_TIME,     REG_ID,         REG_DT)
        VALUES
            (#{memberId},   #{title},       #{content},     #{sendDay},
             #{sendTime},   #{memberId},    now())
    </insert>

</mapper>
